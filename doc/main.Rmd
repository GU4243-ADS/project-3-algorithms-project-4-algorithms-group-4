---
title: "Collaborative Filtering"
author: "Group 4"
date: "4/8/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### Step 0: Load Data
```{r}
# setwd("/Users/Nicole/Documents/GitHub/project-3-algorithms-project-4-algorithms-group-4/doc")
# Change working directory 

load(file = "../data/MS_UI.RData")
load(file = "../data/movie_UI.RData")
```


## Task: Memory Based Collaborative Filtering

### Comparing different similarity weights
#### Pearson correlation
```{r}
# Weights
load(file = "../data/MS_sim.RData")
load(file = "../data/movie_sim.RData")

# Predictions
load(file ="../data/MS_pred.RData")
load(file = "../data/movie_pred.RData")
```

#### Spearman's correlation
```{r}

```

#### Vector similarity
```{r}

```


#### Entropy
```{r}

```


#### Mean-Square Difference
```{r}

```


#### SimRank
```{r}

```


## Task: Group 4 Specific Assignment - Neighbors 
```{r}

```



## Task: Model Based Collaborative Filtering

### Step 1: Build EM algorithm 
E-step: $aic := log(\hat{\mu}) + \sum log(\gamma) - log(\sum e^{log (\mu) + \sum log (\gamma)})$

M-step: $\hat{\mu}_c = \frac{1}{N} \sum_{i = 1}^N a_{ic} \text{for} c = 1, 2, ... , C$  
$\hat{gamma}_{c,j}^{k} = \frac{\sum_{i|j \in I(i)} a_{ic}(r_{i,j} = k})}{\sum_{i|j \in I(i)} a_{ic}} \text{for } c, j, k$. 
```{r}
movie_predict <- EM_train(movie_UI, k = 6, C = 12) # change number of clusters ???? 
MS_predict <- EM_train(MS_UI, k = 1, C = 3)
```

### Step 2: Predict ratings
```{r}
for (j in 1:n.items) {
mov.train[, j] <- bayesian_predict(mov.train, hard.assignments = hard.assignments, gamma = gamma)
}
```

### Step 3: Calculate test error
```{r}
what.to.predict <- which(!is.na(movies_UI_test)) # only select where movie_UI_test has rankings

(mae <- sum(abs(predictions[what.to.predict] - movie_UI_test[what.to.predict]))/length(what.to.predict)) # movie_UI_predicted is the predicted data 
```

